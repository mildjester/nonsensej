<!DOCTYPE html>
<html lang="ja-JP">
    <head>
		
		
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Dockerチートシート &middot; Nonsense J</title>

		
  		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/fonts.css">
		
		<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

		
		<link href="" rel="alternate" type="application/rss+xml" title="Nonsense J" />
	</head>

    <body>
        		<nav class="nav">
			<div class="nav-container">
				<a href="/">
					<h2 class="nav-title">Nonsense J</h2>
				</a>
				<ul>
    
    
</ul>
			</div>
		</nav>

        

<main>
	<div class="post">
		<h1 class="post-title">Dockerチートシート</h1>
		<div class="post-info">
				<time datetime="2017-11-28 16:22:31 &#43;0000 UTC">November 28, 2017</time>
			
				<div class="tags_list">
					 <div class="tags_item"><a href="/tags/docker/">Docker</a></div>
				</div>
			
		</div>
		<h3 id="dockerhubにログイン">DockerHubにログイン</h3>
<p>まずこれをしておかないとDockerHubにて公開されているイメージを取ってこれない。 <br>
※要DockerHubアカウント</p>
<pre><code>docker login  
</code></pre><h3 id="dockerイメージ作成">Dockerイメージ作成</h3>
<p>Dockerfileからイメージを作成する。 <br>
Dockerfileの作り方そのものは割愛。</p>
<pre><code>docker build --no-cache=true -t {好きなイメージ名} {Dockerfileがあるディレクトリパス}  
</code></pre><h3 id="現在ローカルにあるイメージ確認">現在ローカルにあるイメージ確認</h3>
<pre><code>docker images  
</code></pre><h3 id="イメージからコンテナ作成">イメージからコンテナ作成</h3>
<pre><code>docker run -itd -h {好きなホスト名} -v {ホストのディレクトリ}:{コンテナのディレクトリ} --name {好きなコンテナ名} -p {ホスト側ポート}:{コンテナ側ポート}　{イメージ名} {実行コマンド}  
</code></pre><p>■補足 <br>
【vオプション】 <br>
ホストのディレクトリとコンテナのディレクトリを共有するオプション <br>
例えば<!-- raw HTML omitted -->-v /home:/home<!-- raw HTML omitted -->とすると、ホストのhomeディレクトリとコンテナのhomeディレクトリの中身が同期される。</p>
<p>【pオプション】 <br>
ホスト側にどのポートにアクセスがあった場合、コンテナのどのポートに流すかを設定する。 <br>
例えば<!-- raw HTML omitted -->-p 80:80<!-- raw HTML omitted -->とすればホストの80ポートへのアクセスはコンテナの80ポートへ流れる。　<br>
複数ポートを設定したい場合は<!-- raw HTML omitted -->-p 80:80 -p 443:443<!-- raw HTML omitted -->のように複数指定する事も可能。</p>
<p>また、ホスト側が複数IPアドレスを持っている場合などに<!-- raw HTML omitted -->-p 192.168.1.1:80:80<!-- raw HTML omitted -->のようにIPアドレスを指定する事も可能。</p>
<p>【実行コマンド】<br>
Dockerfileにて実行コマンドを指定していた場合は省略可能。　<br>
特定のコマンドを実行したい訳でない場合は<!-- raw HTML omitted -->/bin/bash<!-- raw HTML omitted -->を指定しておくと無難。　</p>
<h3 id="コンテナ一覧を確認する">コンテナ一覧を確認する</h3>
<pre><code>docker ps -a  
</code></pre><p>-aオプションをつけないと停止しているコンテナは表示されない。</p>
<h3 id="ホストからコンテナに入る">ホストからコンテナに入る</h3>
<pre><code>docker exec -it {コンテナ名} {実行シェル}  
</code></pre><p>■補足 <br>
【実行シェル】<br>
どのシェルでログインしたいか。 　<br>
分からなければ<!-- raw HTML omitted -->bash<!-- raw HTML omitted -->にしておくと無難。</p>
<h3 id="コンテナを停止する">コンテナを停止する</h3>
<pre><code>docker stop {コンテナ名}  
</code></pre><h3 id="コンテナを起動する">コンテナを起動する</h3>
<pre><code>docker start {コンテナ名}  
</code></pre><h3 id="コンテナを削除する">コンテナを削除する</h3>
<p>コンテナが停止している状態で以下を実行。</p>
<pre><code>docker rm {コンテナ名}  
</code></pre><h3 id="ローカルのイメージを削除する">ローカルのイメージを削除する</h3>
<p>該当イメージを利用しているコンテナが存在しない状態で以下を実行。</p>
<pre><code>docker rmi {イメージ名}  
</code></pre><h3 id="コンテナをバックアップする">コンテナをバックアップする</h3>
<pre><code>docker export {コンテナ名} &gt; {任意バックアップ名}.tar  
</code></pre><h3 id="バックアップからコンテナをリストアする">バックアップからコンテナをリストアする</h3>
<p>コンテナのリストアは、バックアップしたコンテナのイメージを作成するということ。 <br>
作成したイメージからコンテナを作ればリストアとなる。</p>
<pre><code>cat {バックアップ名}.tar | docker import - {作成するイメージ名}  
docker run 〜以下略〜  
</code></pre><h3 id="ホストとコンテナでファイル転送">ホストとコンテナでファイル転送</h3>
<pre><code># ホストからコンテナ  
docker cp {コピー元ファイルパス} {コンテナ名}:{コピー先ファイルパス}  
# コンテナからホスト  
docker cp {コンテナ名}:{コピー元ファイルパス} {コピー先ファイルパス}  
</code></pre>
	</div>

	<div class="pagination">
		<a href="/posts/wp/820/" class="left arrow">&#8592;</a>
		<a href="/posts/wp/857/" class="right arrow">&#8594;</a>

		<a href="#" class="top">Top</a>
	</div>
</main>


        		<footer>
			
			<span>
			&copy; <time datetime="2021-05-05 05:12:48.2906209 &#43;0900 JST m=&#43;0.110215401">2021</time> . Nonsense J
			</span>
		</footer>

    </body>
</html>
