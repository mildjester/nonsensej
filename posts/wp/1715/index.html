<!DOCTYPE html>
<html lang="ja-JP">
    <head>
		
		
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>gitコマンドで複数のGitHubアカウントを使い分ける &middot; Nonsense J</title>

		
  		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/fonts.css">
		
		<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

		
		<link href="" rel="alternate" type="application/rss+xml" title="Nonsense J" />
	</head>

    <body>
        		<nav class="nav">
			<div class="nav-container">
				<a href="/">
					<h2 class="nav-title">Nonsense J</h2>
				</a>
				<ul>
    
    
</ul>
			</div>
		</nav>

        

<main>
	<div class="post">
		<h1 class="post-title">gitコマンドで複数のGitHubアカウントを使い分ける</h1>
		<div class="post-info">
				<time datetime="2018-11-14 20:37:00 &#43;0000 UTC">November 14, 2018</time>
			
				<div class="tags_list">
					 <div class="tags_item"><a href="/tags/git/">git</a></div>
				</div>
			
		</div>
		<h3 id="環境">環境</h3>
<p>Mac OS<br>
(Linuxでも動く気がします）</p>
<hr>
<h4 id="-2019329追記">※ 2019/3/29追記</h4>
<p>GitHubの利用規約にて1個人で複数の無料アカウントを運用する事は禁止されているようでした。<br>
<a href="https://help.github.com/en/articles/github-terms-of-service#b-account-terms">https://help.github.com/en/articles/github-terms-of-service#b-account-terms</a></p>
<p>もし複数の無料アカウントを利用している場合はアカウントの統合などを検討した方が良いです。<br>
無料アカウントと有料アカウントを使い分ける場合などは本手順を参考にして貰えればと思います。</p>
<h3 id="概要">概要</h3>
<p>GitHubではアカウントに秘密鍵が紐づいており<br>
<!-- raw HTML omitted -->git<!-- raw HTML omitted --> コマンドを実行した際に指定した秘密鍵で利用アカウントを判定しています。<br>
（秘密鍵未指定の場合はデフォルトの秘密鍵）</p>
<p>フリーランスをしていると自分のGitHubアカウントとは別で<br>
取引先様のGitHubアカウントを作成する必要があったりするのですが<br>
１台のPCで複数GitHubアカウントを使っていると秘密鍵の切り替えが面倒です。</p>
<p>私も最初はこちらの記事のように<!-- raw HTML omitted -->.ssh/config<!-- raw HTML omitted -->に別ホストとして設定していたのですが<br>
これだとcloneする時などにいちいちホスト名を書き換えたりしなければいけなかったりして<br>
それも少し面倒でした。（特にリポジトリが沢山あるプロジェクトだったので）<br>
<!-- raw HTML omitted --><a href="https://qiita.com/yamataku29/items/4744c9c70ad793c83b82">https://qiita.com/yamataku29/items/4744c9c70ad793c83b82</a><!-- raw HTML omitted --></p>
<p>というわけで<br>
リポジトリ所有者（ユーザーもしくはOrganizations）と秘密鍵の紐づけを設定しておけば<br>
自動でgitコマンド実行時に秘密鍵を使い分けてくれるスクリプトを作りました。</p>
<p>こちらです<br>
<!-- raw HTML omitted --><a href="https://github.com/mildjester/gits">https://github.com/mildjester/gits</a><!-- raw HTML omitted --></p>
<hr>
<h3 id="使い方">使い方</h3>
<p>①cloneでもZIPダウンロードでも良いので上記リポジトリをダウンロードしてきます。</p>
<p>②<!-- raw HTML omitted -->config_template<!-- raw HTML omitted -->を同ディレクトリに<!-- raw HTML omitted -->config<!-- raw HTML omitted -->という名前でコピーします。</p>
<p>③コピーして生成した<!-- raw HTML omitted -->config<!-- raw HTML omitted -->の以下変数を設定します<br>
■defaultKey<br>
デフォルトの秘密鍵へのパス。基本的にテンプレートのままでいいはず。</p>
<p>■specialKeys<br>
デフォルト以外の秘密鍵を使うリポジトリ所有者と秘密鍵の紐付け一覧。<br>
形式は『リポジトリ所有者::秘密鍵のパス』なので<br>
例えば「所有者AAA」のリポジトリに使う秘密鍵は<!-- raw HTML omitted -->~/.ssh/id_rsa_1<!-- raw HTML omitted -->、<br>
「所有者BBB」のリポジトリに使う秘密鍵は<!-- raw HTML omitted -->~/.ssh/id_rsa_2<!-- raw HTML omitted -->とする場合は<br>
以下のようになります。</p>
<pre><code>specialKeys=(  
    'AAA::~/.ssh/id_rsa_1'  
    'BBB::~/.ssh/id_rsa_2'  
)  
</code></pre><p>④<!-- raw HTML omitted -->~/.bashrc<!-- raw HTML omitted -->に以下のエイリアスを追記しておきます。<br>
通常使っているシェルがbash以外（zshやfishなど）の場合は、そちらの設定ファイルへ追記してください。</p>
<pre><code># gitコマンドを置き換える  
alias git=&quot;/path-to-gits-repository/gits.sh&quot;  
</code></pre><p>※path-to-gits-repositoryはリポジトリをcloneまたはダウンロードしてきたディレクトリを指定してください</p>
<p>これで何も考えずにgitコマンドを打っても、裏で勝手に秘密鍵を切り替えてくれるようになります。</p>
<h3 id="備考ghqを使っている場合">備考：ghqを使っている場合</h3>
<p>私は<!-- raw HTML omitted -->git clone<!-- raw HTML omitted -->よりも<!-- raw HTML omitted -->ghq get<!-- raw HTML omitted -->をよく使うので、そのスクリプトも用意しました。<br>
基本的な設定は上記と同じで、エイリアスの設定だけ追加します。</p>
<pre><code>alias ghq_get=&quot;~/git/github.com/mildjester/gits/ghq_get.sh&quot;  
</code></pre><p>こちらは完全にコマンドを置き換える訳ではないのですが<br>
以下のコマンドでリポジトリを取得する事ができるようになります。<br>
(ghqとgetの間がスペースではなくアンダーバーになるだけ)</p>
<pre><code>ghq_get git@github.com:AAAA/hogehoge.git  
</code></pre>
	</div>

	<div class="pagination">
		<a href="/posts/wp/1627/" class="left arrow">&#8592;</a>
		<a href="/posts/wp/1735/" class="right arrow">&#8594;</a>

		<a href="#" class="top">Top</a>
	</div>
</main>


        		<footer>
			
			<span>
			&copy; <time datetime="2021-05-05 05:12:48.2782364 &#43;0900 JST m=&#43;0.097830801">2021</time> . Nonsense J
			</span>
		</footer>

    </body>
</html>
